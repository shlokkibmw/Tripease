<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Home | Travel Dashboard</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <link href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css" rel="stylesheet">
  <style>
    /* --- Your styles remain the same --- */
    :root {
      --primary: #4a6fa5;
      --secondary: #166088;
      --accent: #4fc3f7;
      --light: #f8f9fa;
      --dark: #343a40;
      --success: #28a745;
      --warning: #ffc107;
      --danger: #dc3545;
    }
    body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin:0; padding:0; background:#f5f5f5; color:#333; display:flex; flex-direction:column; height:100vh; }
    header { background:#fff; padding:15px 20px; display:flex; justify-content:space-between; align-items:center; box-shadow:0 2px 5px rgba(0,0,0,0.1); z-index:100; flex-shrink:0; }
    #menu-toggle { background:none; border:none; font-size:24px; cursor:pointer; padding:5px 10px; }
    header h1 { margin:0; font-size:20px; color:var(--secondary); }
    nav a { color:var(--secondary); text-decoration:none; display:flex; align-items:center; gap:5px; }
    /* Sidebar */
    .sidebar { width:250px; background:#fff; position:fixed; top:0; left:0; height:100vh; box-shadow:2px 0 10px rgba(0,0,0,0.1); transform:translateX(-100%); transition:transform 0.3s ease; z-index:99; padding-top:60px; }
    .sidebar.show { transform:translateX(0); }
    .sidebar-header { padding:20px; text-align:center; border-bottom:1px solid #eee; }
    .sidebar-header img { width:80px; height:80px; border-radius:50%; object-fit:cover; margin-bottom:10px; }
    .sidebar-header h3 { margin:5px 0; }
    .sidebar-header p { margin:0; color:var(--warning); font-size:14px; }
    .sidebar ul { list-style:none; padding:0; margin:0; }
    .sidebar li a { display:flex; align-items:center; padding:12px 20px; color:#555; text-decoration:none; transition:0.3s; }
    .sidebar li a:hover, .sidebar li a.active { background:rgba(74,111,165,0.1); color:var(--primary); }
    .sidebar li a i { margin-right:10px; width:20px; text-align:center; }
    /* Layout */
    .main-content { display:flex; flex:1; overflow:hidden; }
    .content-area { flex:1; display:flex; flex-direction:column; overflow:hidden; }
    .container { padding:20px; overflow-y:auto; flex:1; }
    /* Map Styles */
    .map-container { position:relative; height:500px; border-radius:8px; overflow:hidden; box-shadow:0 2px 10px rgba(0,0,0,0.1); margin-bottom:20px; }
    #map { width:100%; height:100%; min-height:400px; }
    .map-overlay { position:absolute; top:10px; left:10px; background:rgba(255,255,255,0.9); padding:10px; border-radius:5px; box-shadow:0 2px 5px rgba(0,0,0,0.2); z-index:1; }
    .map-controls { position:absolute; top:10px; right:10px; display:flex; flex-direction:column; gap:10px; z-index:2; }
    .map-control-btn { width:32px; height:32px; border-radius:4px; background:white; border:none; box-shadow:0 0 5px rgba(0,0,0,0.2); cursor:pointer; display:flex; align-items:center; justify-content:center; }
    .map-legend { position:absolute; bottom:20px; left:10px; background:rgba(255,255,255,0.9); padding:10px; border-radius:5px; box-shadow:0 0 5px rgba(0,0,0,0.2); z-index:2; }
    .legend-item { display:flex; align-items:center; margin-bottom:5px; }
    .legend-color { width:15px; height:15px; border-radius:50%; margin-right:8px; display:inline-block; }
    .map-loading { position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); z-index:10; text-align:center; color:var(--primary); }
    .spinner { border:4px solid rgba(0,0,0,0.1); border-left:4px solid var(--primary); border-radius:50%; width:40px; height:40px; animation:spin 1s linear infinite; margin:0 auto 15px; }
    @keyframes spin { 0% { transform:rotate(0deg);} 100%{ transform:rotate(360deg);} }
    /* Chatbot */
    .chatbot-container { width:25%; background:white; box-shadow:-2px 0 10px rgba(0,0,0,0.1); display:flex; flex-direction:column; border-left:1px solid #ddd; }
    .chatbot-header { font-weight:bold; font-size:18px; padding:15px; border-bottom:1px solid #ccc; background:var(--primary); color:white; }
    .chat-messages { flex-grow:1; overflow-y:auto; padding:15px; background:#f9f9f9; }
    .chat-message { margin-bottom:10px; padding:8px 12px; border-radius:15px; max-width:80%; }
    .chat-message.user { background:var(--primary); color:white; margin-left:auto; text-align:right; }
    .chat-message.bot { background:#e9ecef; color:#333; text-align:left; }
    .chat-form { display:flex; padding:15px; border-top:1px solid #ddd; }
    .chat-input { flex-grow:1; padding:10px; border:1px solid #ccc; border-radius:20px; outline:none; }
    .chat-send { padding:10px 15px; margin-left:10px; border:none; background:var(--primary); color:white; border-radius:20px; cursor:pointer; }
  </style>
</head>
<body>
  <header>
    <button id="menu-toggle">&#9776;</button>
    <h1>Tour & Travel Dashboard</h1>
    <nav>
      <a href="#"><i class="fas fa-sign-out-alt"></i> Logout</a>
    </nav>
  </header>

  <div id="sidebar" class="sidebar">
    <div class="sidebar-header">
      <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="User Profile">
      <h3>John Doe</h3>
      <p>Gold Member</p>
    </div>
    <ul>
      <li><a href="home.html" class="active"><i class="fas fa-home"></i> Home</a></li>
      <li><a href="profile.html"><i class="fas fa-user"></i> Profile</a></li>
      <li><a href="mytrip.html"><i class="fas fa-suitcase"></i> My Trips</a></li>
      <li><a href="transaction.html"><i class="fas fa-receipt"></i> Transactions</a></li>
      <li><a href="help.html"><i class="fas fa-question-circle"></i> Help</a></li>
      <li><a href="setting.html"><i class="fas fa-cog"></i> Settings</a></li>
    </ul>
  </div>

  <div class="main-content">
    <div class="content-area">
      <div class="map-container">
        <div id="map">
          <div class="map-loading">
            <div class="spinner"></div>
            <p>Loading map...</p>
          </div>
        </div>
        <div class="map-overlay">
          <h4>Explore Sikkim</h4>
          <p>Click on markers to view details</p>
        </div>
        <div class="map-controls">
          <button class="map-control-btn" id="zoom-in"><i class="fas fa-plus"></i></button>
          <button class="map-control-btn" id="zoom-out"><i class="fas fa-minus"></i></button>
          <button class="map-control-btn" id="reset-view"><i class="fas fa-globe"></i></button>
        </div>
        <div class="map-legend">
          <h4>Destinations</h4>
          <div class="legend-item"><span class="legend-color" style="background:#4a6fa5"></span><span>Visited</span></div>
          <div class="legend-item"><span class="legend-color" style="background:#28a745"></span><span>Upcoming</span></div>
          <div class="legend-item"><span class="legend-color" style="background:#ffc107"></span><span>Recommended</span></div>
        </div>
      </div>
    </div>
    <div class="chatbot-container">
      <div class="chatbot-header"><i class="fas fa-comments"></i> Travel Assistant</div>
      <div class="chat-messages" id="chat-messages">
        <div class="chat-message bot">Hello! Ask me about Sikkim destinations ðŸŒ„</div>
      </div>
      <form class="chat-form" id="chat-form">
        <input type="text" class="chat-input" id="chat-input" placeholder="Ask about Sikkim travel..." />
        <button type="submit" class="chat-send" id="send-btn"><i class="fas fa-paper-plane"></i></button>
      </form>
    </div>
  </div>

  <script src="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js"></script>
  <script>
    // Sidebar toggle
    document.getElementById('menu-toggle').addEventListener('click', () => {
      document.getElementById('sidebar').classList.toggle('show');
    });

    mapboxgl.accessToken = 'pk.eyJ1Ijoic2hsb2swMDciLCJhIjoiY21maHlqdXVkMGZjMjJrc2FwZms1NWI4cyJ9.mtav-6CACDNjXmxRGgpitA';

    // Bounds for Sikkim
    const sikkimBounds = [[87.9, 27.1], [88.9, 28.2]];

    const map = new mapboxgl.Map({
      container: 'map',
      style: 'mapbox://styles/mapbox/streets-v11',
      center: [88.5122, 27.5330],
      zoom: 8,
      maxBounds: sikkimBounds
    });

    map.on('load', () => {
      document.querySelector('.map-loading').style.display = 'none';
      map.addControl(new mapboxgl.NavigationControl());

      map.addSource('sikkim-boundary', {
        type: 'geojson',
        data: 'https://raw.githubusercontent.com/geohacker/india/master/state/sikkim.geojson'
      });

      map.addLayer({ id:'sikkim-fill', type:'fill', source:'sikkim-boundary', paint:{'fill-color':'#4a6fa5','fill-opacity':0.15}});
      map.addLayer({ id:'sikkim-outline', type:'line', source:'sikkim-boundary', paint:{'line-color':'#166088','line-width':2}});

      const destinations = [
        { name:'Gangtok', coordinates:[88.6139,27.3389], description:'Capital city with monasteries.', type:'upcoming', date:'Oct 20 - Oct 25, 2025', image:'https://images.unsplash.com/photo-1618839945682-54a2a8a8f6e0?auto=format&fit=crop&w=600&q=80'},
        { name:'Nathula Pass', coordinates:[88.7870,27.3826], description:'Snow-clad Indo-China border.', type:'recommended', date:'Nov 5, 2025', image:'https://images.unsplash.com/photo-1565084886909-ecf7aa0ddc7c?auto=format&fit=crop&w=600&q=80'},
        { name:'Tsomgo Lake', coordinates:[88.7570,27.3748], description:'Glacial lake at 12,000 ft.', type:'visited', date:'March 2025', image:'https://images.unsplash.com/photo-1584945698900-fc8646a1e9b7?auto=format&fit=crop&w=600&q=80'},
        { name:'Yumthang Valley', coordinates:[88.7126,27.7997], description:'Valley of Flowers.', type:'recommended', date:'May 2025', image:'https://images.unsplash.com/photo-1585302219187-3b209d292743?auto=format&fit=crop&w=600&q=80'},
        { name:'Pelling', coordinates:[88.2396,27.3078], description:'Kanchenjunga views.', type:'upcoming', date:'Dec 2025', image:'https://images.unsplash.com/photo-1595254709986-0ff19f1d444b?auto=format&fit=crop&w=600&q=80'},
        { name:'Ravangla', coordinates:[88.3664,27.3089], description:'Famous for Buddha Park.', type:'visited', date:'Jan 2025', image:'https://images.unsplash.com/photo-1631518890101-6b28e0b9230e?auto=format&fit=crop&w=600&q=80'}
      ];

      function getColor(type){ return type==='visited'?'#4a6fa5':type==='upcoming'?'#28a745':'#ffc107'; }
      function getIcon(type){ return type==='visited'?'fa-check-circle':type==='upcoming'?'fa-calendar-check':'fa-star'; }

      destinations.forEach(dest => {
        const el = document.createElement('div');
        el.innerHTML = `<i class="fas ${getIcon(dest.type)}" style="font-size:20px;color:${getColor(dest.type)}"></i>`;
        new mapboxgl.Marker(el)
          .setLngLat(dest.coordinates)
          .setPopup(new mapboxgl.Popup({offset:25}).setHTML(`
            <div style="min-width:230px;">
              <img src="${dest.image}" style="width:100%;height:120px;object-fit:cover;border-radius:8px 8px 0 0;margin-bottom:10px;">
              <h4>${dest.name}</h4>
              <p>${dest.description}</p>
              <p style="font-size:12px;color:#666"><i class="fas fa-calendar-alt"></i> ${dest.date}</p>
            </div>`))
          .addTo(map);
      });
    });

    document.getElementById('zoom-in').onclick=()=>map.zoomIn();
    document.getElementById('zoom-out').onclick=()=>map.zoomOut();
    document.getElementById('reset-view').onclick=()=>map.flyTo({center:[88.5122,27.5330],zoom:8});

    // Chatbot
    const chatForm=document.getElementById('chat-form');
    const chatInput=document.getElementById('chat-input');
    const chatMessages=document.getElementById('chat-messages');

    chatForm.addEventListener('submit',e=>{
      e.preventDefault();
      const text=chatInput.value.trim();
      if(!text) return;
      const user=document.createElement('div'); user.className='chat-message user'; user.textContent=text; chatMessages.appendChild(user);
      setTimeout(()=>{ const bot=document.createElement('div'); bot.className='chat-message bot'; bot.textContent="I can guide you about Gangtok, Tsomgo Lake, Nathula Pass, Yumthang Valley, Pelling, or Ravangla ðŸ¤–"; chatMessages.appendChild(bot); chatMessages.scrollTop=chatMessages.scrollHeight; },800);
      chatInput.value='';
    });
  </script>
</body>
</html>
