<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Home | Travel Dashboard</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <link href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css" rel="stylesheet">
  <style>
    :root {
      --primary: #4a6fa5;
      --secondary: #166088;
      --accent: #4fc3f7;
      --light: #f8f9fa;
      --dark: #343a40;
      --success: #28a745;
      --warning: #ffc107;
      --danger: #dc3545;
    }
    body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin:0; padding:0; background:#f5f5f5; color:#333; display:flex; flex-direction:column; height:100vh; }
    header { display:flex; align-items:center; justify-content:space-between; background:white; padding:15px 20px; box-shadow:0 2px 5px rgba(0,0,0,0.1); z-index:98; }
    #menu-toggle { background:none; border:none; font-size:20px; cursor:pointer; color:var(--secondary); }
    header h1 { margin:0; font-size:20px; color:var(--secondary); }
    nav a { color:var(--secondary); text-decoration:none; display:flex; align-items:center; gap:5px; }
    /* Sidebar */
    .sidebar { width:250px; background:#fff; position:fixed; top:0; left:0; height:100vh; box-shadow:2px 0 10px rgba(0,0,0,0.1); transform:translateX(-100%); transition:transform 0.3s ease; z-index:99; padding-top:60px; }
    .sidebar.show { transform:translateX(0); }
    .sidebar-header { padding:20px; text-align:center; border-bottom:1px solid #eee; }
    .sidebar-header img { width:80px; height:80px; border-radius:50%; object-fit:cover; margin-bottom:10px; }
    .sidebar-header h3 { margin:5px 0; }
    .sidebar-header p { margin:0; color:var(--warning); font-size:14px; }
    .sidebar ul { list-style:none; padding:0; margin:0; }
    .sidebar li a { display:flex; align-items:center; padding:12px 20px; color:#555; text-decoration:none; transition:0.3s; }
    .sidebar li a:hover, .sidebar li a.active { background:rgba(74,111,165,0.1); color:var(--primary); }
    .sidebar li a i { margin-right:10px; width:20px; text-align:center; }
    /* Layout */
    .main-content { display:flex; flex:1; overflow:hidden; }
    .content-area { flex:1; display:flex; flex-direction:column; overflow:hidden; }
    .container { padding:20px; display:flex; flex-direction:column; overflow:hidden; flex:1; }
    /* Map Styles */
    .map-container { position:relative; flex:1 1 0; min-height:360px; border-radius:8px; overflow:hidden; box-shadow:0 2px 10px rgba(0,0,0,0.1); margin-bottom:20px; display:flex; }
    #map { width:100%; height:100%; }
    .map-overlay { position:absolute; top:10px; left:10px; background:rgba(255,255,255,0.9); padding:10px; border-radius:5px; box-shadow:0 2px 5px rgba(0,0,0,0.2); z-index:1; }
    .map-controls { position:absolute; top:10px; right:10px; display:flex; flex-direction:column; gap:10px; z-index:2; }
    .map-control-btn { width:32px; height:32px; border-radius:4px; background:white; border:none; box-shadow:0 0 5px rgba(0,0,0,0.2); cursor:pointer; display:flex; align-items:center; justify-content:center; }
    .map-legend { position:absolute; bottom:20px; left:10px; background:rgba(255,255,255,0.9); padding:10px; border-radius:5px; box-shadow:0 0 5px rgba(0,0,0,0.2); z-index:2; }
    .legend-item { display:flex; align-items:center; margin-bottom:5px; }
    .legend-color { width:15px; height:15px; border-radius:50%; margin-right:8px; display:inline-block; }
    .map-loading { position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); z-index:10; text-align:center; color:var(--primary); }
    .spinner { border:4px solid rgba(0,0,0,0.1); border-left:4px solid var(--primary); border-radius:50%; width:40px; height:40px; animation:spin 1s linear infinite; margin:0 auto 15px; }
    @keyframes spin { 0% { transform:rotate(0deg);} 100%{ transform:rotate(360deg);} }
    /* Chatbot */
    .chatbot-container { width:25%; background:white; box-shadow:-2px 0 10px rgba(0,0,0,0.1); display:flex; flex-direction:column; border-left:1px solid #ddd; }
    .chatbot-header { font-weight:bold; font-size:18px; padding:15px; border-bottom:1px solid #ccc; background:var(--primary); color:white; }
    .chat-messages { flex-grow:1; overflow-y:auto; padding:15px; background:#f9f9f9; }
    .chat-message { margin-bottom:10px; padding:8px 12px; border-radius:15px; max-width:80%; }
    .chat-message.user { background:var(--primary); color:white; margin-left:auto; text-align:right; }
    .chat-message.bot { background:#e9ecef; color:#333; text-align:left; }
    .chat-form { display:flex; padding:15px; border-top:1px solid #ddd; }
    .chat-input { flex-grow:1; padding:10px; border:1px solid #ccc; border-radius:20px; outline:none; }
    .chat-send { padding:10px 15px; margin-left:10px; border:none; background:var(--primary); color:white; border-radius:20px; cursor:pointer; }
    /* Quick action buttons */
    .quick-actions { display:flex; flex-wrap:wrap; gap:8px; padding:10px 15px; border-bottom:1px solid #eee; background:#f5f7fa; }
    .quick-action-btn { background:white; border:1px solid #ddd; border-radius:20px; padding:6px 12px; font-size:12px; cursor:pointer; transition:all 0.2s; }
    .quick-action-btn:hover { background:var(--primary); color:white; }
    /* Budget styling */
    .budget-badge { background: var(--success); color: white; padding: 2px 8px; border-radius: 10px; font-size: 12px; margin-left: 10px; }
    .budget-option { border-left: 3px solid var(--success); padding-left: 10px; margin: 10px 0; }
    /* Suggestion chips */
    .suggestion-chips { display:flex; flex-wrap:wrap; gap:8px; margin-top:10px; }
    .suggestion-chip { background:rgba(74, 111, 165, 0.1); border:1px solid rgba(74, 111, 165, 0.3); border-radius:15px; padding:5px 10px; font-size:12px; cursor:pointer; transition:all 0.2s; }
    .suggestion-chip:hover { background:var(--primary); color:white; }
    /* Typing indicator */
    .typing-indicator { display:flex; align-items:center; padding:8px 12px; }
    .typing-dot { width:8px; height:8px; border-radius:50%; background:#999; margin:0 2px; animation:typing 1.4s infinite ease-in-out; }
    .typing-dot:nth-child(1) { animation-delay:-0.32s; }
    .typing-dot:nth-child(2) { animation-delay:-0.16s; }
    @keyframes typing {
      0%, 80%, 100% { transform:scale(0.8); opacity:0.5; }
      40% { transform:scale(1); opacity:1; }
    }
  </style>
</head>
<body>
  <header>
    <button id="menu-toggle">&#9776;</button>
    <h1>Tour & Travel Dashboard</h1>
    <nav>
      <a id="logout-btn" href="login.html"><i class="fas fa-sign-out-alt"></i> Logout</a>
    </nav>
  </header>

  <!-- Sidebar -->
  <div id="sidebar" class="sidebar" aria-hidden="true">
    <div class="sidebar-header">
      <img src="harsh.jpg" alt="User Profile" class="profile-img">
      <h3>Harsh Pandey</h3>
    </div>
    <ul>
      <li><a href="home.html"><i class="fas fa-home"></i> Home</a></li>
      <li><a href="profile.html"><i class="fas fa-user"></i> Profile</a></li>
      <li><a href="mytrip.html"><i class="fas fa-suitcase"></i> My Trips</a></li>
      <li><a href="heritage.html"><i class="fas fa-landmark"></i> Heritage Cloud</a></li>
      <li><a href="help.html"><i class="fas fa-question-circle"></i> Help</a></li>
      <li><a href="setting.html"><i class="fas fa-cog"></i> Settings</a></li>
    </ul>
  </div>

  <div class="main-content">
    <div class="content-area">
      <div class="map-container">
        <div id="map">
          <div class="map-loading">
            <div class="spinner"></div>
            <p>Loading map...</p>
          </div>
        </div>
        <div class="map-overlay">
          <h4>Explore using TripEase</h4>
          <p>Click on markers to view details</p>
        </div>
        <div class="map-controls">
          <button class="map-control-btn" id="zoom-in"><i class="fas fa-plus"></i></button>
          <button class="map-control-btn" id="zoom-out"><i class="fas fa-minus"></i></button>
          <button class="map-control-btn" id="reset-view"><i class="fas fa-globe"></i></button>
        </div>
        <div class="map-legend">
          <h4>Destinations</h4>
          <div class="legend-item"><span class="legend-color" style="background:#4a6fa5"></span><span>Visited</span></div>
          <div class="legend-item"><span class="legend-color" style="background:#28a745"></span><span>Upcoming</span></div>
          <div class="legend-item"><span class="legend-color" style="background:#ffc107"></span><span>Recommended</span></div>
        </div>
      </div>
    </div>
    <div class="chatbot-container">
      <div class="chatbot-header"><i class="fas fa-comments"></i> Travel Assistant</div>
      <div class="quick-actions">
        <button class="quick-action-btn" data-query="monasteries in Sikkim">Monasteries</button>
        <button class="quick-action-btn" data-query="3 day itinerary">3-Day Trip</button>
        <button class="quick-action-btn" data-query="5 day itinerary">5-Day Trip</button>
        <button class="quick-action-btn" data-query="best time to visit">Best Time</button>
        <button class="quick-action-btn" data-query="transportation options">Transportation</button>
        <button class="quick-action-btn" data-query="10k budget itinerary">Budget 10k</button>
        <button class="quick-action-btn" data-query="20 thousand rupees trip">Mid-range 20k</button>
        <button class="quick-action-btn" data-query="35k luxury sikkim trip">Luxury 35k</button>
      </div>
      <div class="chat-messages" id="chat-messages">
        <div class="chat-message bot">Hello! I'm your Sikkim travel assistant. I can help you plan your trip, suggest monasteries to visit, create itineraries, and answer any questions about traveling in Sikkim! üèîÔ∏è</div>
        <div class="chat-message bot">
          <p>What would you like to know about? I can tell you about:</p>
          <div class="suggestion-chips">
            <div class="suggestion-chip" data-query="monasteries">Monasteries</div>
            <div class="suggestion-chip" data-query="itineraries">Itineraries</div>
            <div class="suggestion-chip" data-query="best time to visit">Best Time to Visit</div>
            <div class="suggestion-chip" data-query="transportation">Transportation</div>
          </div>
        </div>
      </div>
      <form class="chat-form" id="chat-form">
        <input type="text" class="chat-input" id="chat-input" placeholder="Ask about travel..." />
        <button type="submit" class="chat-send" id="send-btn"><i class="fas fa-paper-plane"></i></button>
      </form>
    </div>
  </div>

  <script src="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js"></script>
  <script>
    // Sidebar toggle
    document.getElementById('menu-toggle').addEventListener('click', () => {
      document.getElementById('sidebar').classList.toggle('show');
    });

    // Map initialization - THIS WAS MISSING!
    mapboxgl.accessToken = 'pk.eyJ1Ijoic2hsb2swMDciLCJhIjoiY21maHlqdXVkMGZjMjJrc2FwZms1NWI4cyJ9.mtav-6CACDNjXmxRGgpitA';

    // Bounds for Sikkim
    const sikkimBounds = [[87.9, 27.1], [88.9, 28.2]];

    const map = new mapboxgl.Map({
      container: 'map',
      style: 'mapbox://styles/mapbox/streets-v11',
      center: [88.5122, 27.5330],
      zoom: 8,
      maxBounds: sikkimBounds
    });

    map.on('load', () => {
      document.querySelector('.map-loading').style.display = 'none';
      map.addControl(new mapboxgl.NavigationControl());

      map.addSource('sikkim-boundary', {
        type: 'geojson',
        data: 'https://raw.githubusercontent.com/geohacker/india/master/state/sikkim.geojson'
      });

      map.addLayer({ id:'sikkim-fill', type:'fill', source:'sikkim-boundary', paint:{'fill-color':'#4a6fa5','fill-opacity':0.15}});
      map.addLayer({ id:'sikkim-outline', type:'line', source:'sikkim-boundary', paint:{'line-color':'#166088','line-width':2}});

      const destinations = [
        { name:'Gangtok', coordinates:[88.6139,27.3389], description:'Capital city with monasteries.', type:'upcoming', date:'Oct 20 - Oct 25, 2025', image:'https://images.unsplash.com/photo-1618839945682-54a2a8a8f6e0?auto=format&fit=crop&w=600&q=80'},
        { name:'Nathula Pass', coordinates:[88.7870,27.3826], description:'Snow-clad Indo-China border.', type:'recommended', date:'Nov 5, 2025', image:'https://images.unsplash.com/photo-1565084886909-ecf7aa0ddc7c?auto=format&fit=crop&w=600&q=80'},
        { name:'Tsomgo Lake', coordinates:[88.7570,27.3748], description:'Glacial lake at 12,000 ft.', type:'visited', date:'March 2025', image:'https://images.unsplash.com/photo-1584945698900-fc8646a1e9b7?auto=format&fit=crop&w=600&q=80'},
        { name:'Yumthang Valley', coordinates:[88.7126,27.7997], description:'Valley of Flowers.', type:'recommended', date:'May 2025', image:'https://images.unsplash.com/photo-1585302219187-3b209d292743?auto=format&fit=crop&w=600&q=80'},
        { name:'Pelling', coordinates:[88.2396,27.3078], description:'Kanchenjunga views.', type:'upcoming', date:'Dec 2025', image:'https://images.unsplash.com/photo-1595254709986-0ff19f1d444b?auto=format&fit=crop&w=600&q=80'},
        { name:'Ravangla', coordinates:[88.3664,27.3089], description:'Famous for Buddha Park.', type:'visited', date:'Jan 2025', image:'https://images.unsplash.com/photo-1631518890101-6b28e0b9230e?auto=format&fit=crop&w=600&q=80'}
      ];

      function getColor(type){ return type==='visited'?'#4a6fa5':type==='upcoming'?'#28a745':'#ffc107'; }
      function getIcon(type){ return type==='visited'?'fa-check-circle':type==='upcoming'?'fa-calendar-check':'fa-star'; }

      destinations.forEach(dest => {
        const el = document.createElement('div');
        el.innerHTML = `<i class="fas ${getIcon(dest.type)}" style="font-size:20px;color:${getColor(dest.type)}"></i>`;
        new mapboxgl.Marker(el)
          .setLngLat(dest.coordinates)
          .setPopup(new mapboxgl.Popup({offset:25}).setHTML(`
            <div style="min-width:230px;">
              <img src="${dest.image}" style="width:100%;height:120px;object-fit:cover;border-radius:8px 8px 0 0;margin-bottom:10px;">
              <h4>${dest.name}</h4>
              <p>${dest.description}</p>
              <p style="font-size:12px;color:#666"><i class="fas fa-calendar-alt"></i> ${dest.date}</p>
            </div>`))
          .addTo(map);
      });
    });

    document.getElementById('zoom-in').onclick=()=>map.zoomIn();
    document.getElementById('zoom-out').onclick=()=>map.zoomOut();
    document.getElementById('reset-view').onclick=()=>map.flyTo({center:[88.5122,27.5330],zoom:8});

    // Chatbot functionality (your complete chatbot code from earlier)
    const chatForm = document.getElementById('chat-form');
    const chatInput = document.getElementById('chat-input');
    const chatMessages = document.getElementById('chat-messages');
    const quickActionBtns = document.querySelectorAll('.quick-action-btn');

    // Chatbot memory and personality
    const chatbot = {
      memory: {
        userName: null,
        userInterests: [],
        conversationHistory: [],
        mentionedPlaces: new Set(),
        userTripPreferences: {
          duration: null,
          budget: null,
          travelStyle: null,
          budgetRange: null
        }
      },
      
      // Budget-based itineraries (your complete budget itineraries object)
      budgetItineraries: {
        '5k-10k': {
          range: '‚Çπ5,000 - ‚Çπ10,000',
          title: 'Budget Backpacker Experience',
          description: 'Perfect for solo travelers or students looking for an authentic experience',
          days: 4,
          includes: ['Hostel/homestay accommodation', 'Local bus transport', 'Street food meals', 'Free monastery visits'],
          itinerary: [
            "Day 1: Arrive in Gangtok, check into budget hostel, explore local markets",
            "Day 2: Local bus to Rumtek Monastery, pack lunch, evening at Enchey Monastery",
            "Day 3: Shared jeep to Tsomgo Lake (group sharing), return evening",
            "Day 4: Local monastery visits, souvenir shopping, departure"
          ],
          tips: ['Book hostels in advance', 'Use shared transport', 'Carry water bottle', 'Try local eateries']
        },
        // ... (include all your other budget itineraries here)
        '10k-15k': {
          range: '‚Çπ10,000 - ‚Çπ15,000',
          title: 'Comfortable Budget Trip',
          description: 'Great balance of comfort and affordability for small groups',
          days: 5,
          includes: ['Budget hotels', 'Mix of shared and private transport', 'Local restaurants', 'Guided monastery tours'],
          itinerary: [
            "Day 1: Arrive Gangtok, mid-range hotel, explore MG Marg",
            "Day 2: Private taxi to Rumtek + Enchey monasteries with guide",
            "Day 3: Shared jeep to Nathula Pass (permits included), packed lunch",
            "Day 4: Travel to Pelling, budget hotel, visit Pemayangtse Monastery",
            "Day 5: Local sightseeing, return to Gangtok, departure"
          ],
          tips: ['Book in off-season', 'Share taxi costs', 'Eat at local dhabas']
        },
        '16k-20k': {
          range: '‚Çπ16,000 - ‚Çπ20,000',
          title: 'Premium Budget Experience',
          description: 'Comfortable travel with better accommodations and private transport',
          days: 6,
          includes: ['3-star hotels', 'Private taxi for entire trip', 'Good local restaurants', 'All entry fees'],
          itinerary: [
            "Day 1: Arrive Gangtok, 3-star hotel, city tour",
            "Day 2: Rumtek Monastery + Banjhakri Falls, private guide",
            "Day 3: Tsomgo Lake + Nathula Pass full day tour",
            "Day 4: Travel to Pelling, hotel check-in, local exploration",
            "Day 5: Pemayangtse Monastery + Khecheopalri Lake",
            "Day 6: Return to Gangtok, souvenir shopping, departure"
          ],
          tips: ['Book hotels with breakfast included', 'Hire driver for multiple days']
        },
        // ... (include all other budget tiers up to 50k+)
        '50k+': {
          range: '‚Çπ50,000+',
          title: 'Royal Sikkim Experience',
          description: 'Ultimate luxury with complete customization and exclusive privileges',
          days: 'Custom 8-10 days',
          includes: ['Palace/luxury heritage stays', 'Multiple vehicles + staff', 'Michelin-level dining', 'Royal experiences'],
          itinerary: [
            "Day 1: Royal welcome at heritage property, personal staff",
            "Day 2: Private monastery blessings and spiritual ceremonies",
            "Day 3: Exclusive border access with military escort",
            "Day 4: Luxury helicopter tours to remote monasteries",
            "Day 5: Private cultural performances with royal families",
            "Day 6: Bespoke adventure experiences (trekking, rafting)",
            "Day 7: Wellness retreat with international therapists",
            "Day 8+: Custom experiences based on royal Sikkim traditions"
          ],
          tips: ['6+ months advance planning', 'Complete customization available']
        }
      },

      // ... (include all your other chatbot methods: generateResponse, extractEntities, determineIntent, etc.)
      generateResponse: function(userInput) {
        const input = userInput.toLowerCase();
        this.memory.conversationHistory.push({ user: input, timestamp: Date.now() });
        
        const entities = this.extractEntities(input);
        const intent = this.determineIntent(input);
        
        this.updateMemory(entities, intent);
        
        return this.formulateResponse(intent, entities);
      },

      extractEntities: function(input) {
        const entities = {
          places: [],
          activities: [],
          time: null,
          preferences: [],
          budget: null
        };

        // Extract budget information
        const budgetMatch = input.match(/(\d+)\s*(k|thousand|lakh|lac|inr|rs|‚Çπ)/i) || 
                           input.match(/(\d+)\s*(thousands|lakhs)/i) ||
                           input.match(/\b(\d{4,5})\b/);
        
        if (budgetMatch) {
          let amount = parseInt(budgetMatch[1]);
          if (budgetMatch[2] && budgetMatch[2].toLowerCase() === 'lakh' || budgetMatch[2] === 'lac') {
            amount *= 100000;
          } else if (budgetMatch[2] && budgetMatch[2].toLowerCase() === 'k') {
            amount *= 1000;
          }
          
          // Convert to budget range
          if (amount >= 50000) entities.budget = '50k+';
          else if (amount >= 41000) entities.budget = '41k-50k';
          else if (amount >= 31000) entities.budget = '31k-40k';
          else if (amount >= 26000) entities.budget = '26k-30k';
          else if (amount >= 21000) entities.budget = '21k-25k';
          else if (amount >= 16000) entities.budget = '16k-20k';
          else if (amount >= 10000) entities.budget = '10k-15k';
          else if (amount >= 5000) entities.budget = '5k-10k';
        }

        return entities;
      },

      determineIntent: function(input) {
        if (input.includes('?') || input.includes('what') || input.includes('how') || input.includes('where')) {
          if (input.includes('monaster') || input.includes('temple')) return 'ask_monastery';
          if (input.includes('itinerary') || input.includes('plan') || input.includes('schedule')) return 'ask_itinerary';
          if (input.includes('budget') || input.includes('price') || input.includes('cost')) return 'ask_budget';
          if (input.includes('best time') || input.includes('season')) return 'ask_season';
          return 'ask_general';
        }
        
        if (input.match(/\d+\s*(k|thousand|lakh|inr|rs|‚Çπ)/i) || input.match(/\b(\d{4,5})\b/)) {
          return 'discuss_budget';
        }
        
        if (this.isGreeting(input)) return 'greeting';
        if (this.isGratitude(input)) return 'gratitude';
        
        return 'general_chat';
      },

      isGreeting: function(input) {
        const greetings = ['hi', 'hello', 'hey', 'good morning', 'good afternoon', 'good evening', 'namaste'];
        return greetings.some(greet => input.includes(greet));
      },

      isGratitude: function(input) {
        const gratitudeWords = ['thanks', 'thank you', 'thank', 'appreciate', 'grateful', 'nice', 'good', 'awesome'];
        return gratitudeWords.some(word => input.includes(word));
      },

      updateMemory: function(entities, intent) {
        if (entities.budget) {
          this.memory.userTripPreferences.budget = entities.budget;
          this.memory.userTripPreferences.budgetRange = this.budgetItineraries[entities.budget]?.range;
        }
      },

      formulateResponse: function(intent, entities) {
        switch (intent) {
          case 'greeting':
            return this.respondToGreeting();
          case 'gratitude':
            return this.respondToGratitude();
          case 'ask_budget':
          case 'discuss_budget':
            return this.provideBudgetItinerary(entities);
          case 'ask_monastery':
            return "Sikkim has many beautiful monasteries! Rumtek, Pemayangtse, and Tashiding are among the most famous. Which monastery would you like to know about?";
          case 'ask_itinerary':
            return "I'd love to help plan your Sikkim itinerary! Could you tell me your budget (like 10k, 20k, etc.) and how many days you have?";
          default:
            return "I'm here to help you plan your Sikkim adventure! You can ask about monasteries, itineraries, budgets, or anything else about traveling in Sikkim.";
        }
      },

      respondToGreeting: function() {
        const greetings = [
          "Namaste! üèîÔ∏è I'm excited to help you plan your Sikkim adventure! How can I assist with your travel plans today?",
          "Hello there! Ready to explore the beautiful monasteries and landscapes of Sikkim? What would you like to know?"
        ];
        return greetings[Math.floor(Math.random() * greetings.length)];
      },

      respondToGratitude: function() {
        const responses = [
          "You're most welcome! I'm genuinely happy to help you discover Sikkim's magic.",
          "The pleasure is all mine! Helping travelers experience Sikkim's beauty is what I love doing."
        ];
        return responses[Math.floor(Math.random() * responses.length)];
      },

      provideBudgetItinerary: function(entities) {
        const budgetKey = entities.budget || this.memory.userTripPreferences.budget;
        
        if (!budgetKey) {
          return "I'd love to suggest a budget-friendly itinerary! Could you let me know your approximate budget? For example, you could say '10k', '25 thousand', or '1 lakh' and I'll create the perfect plan.";
        }
        
        const itinerary = this.budgetItineraries[budgetKey];
        if (!itinerary) {
          return "I have fantastic itineraries for various budgets! Could you specify an amount like 10k, 20k, 30k, etc., and I'll create a customized plan for you.";
        }
        
        let response = `üéØ Perfect! Here's a ${itinerary.title} for ${itinerary.range}:\n\n`;
        response += `üìÖ ${itinerary.days} days | ${itinerary.description}\n\n`;
        response += `‚úÖ Includes: ${itinerary.includes.join(', ')}\n\n`;
        response += `üóìÔ∏è Itinerary:\n`;
        itinerary.itinerary.forEach(day => {
          response += `‚Ä¢ ${day}\n`;
        });
        response += `\nüí° Tips: ${itinerary.tips.join(', ')}\n\n`;
        response += `Would you like me to adjust this for specific interests or duration?`;

        return response;
      }
    };

    // Chat interface
    chatForm.addEventListener('submit', function(e) {
      e.preventDefault();
      const text = chatInput.value.trim();
      if (!text) return;

      const userMessage = document.createElement('div');
      userMessage.className = 'chat-message user';
      userMessage.textContent = text;
      chatMessages.appendChild(userMessage);
      chatInput.value = '';

      const typingIndicator = document.createElement('div');
      typingIndicator.className = 'chat-message bot typing-indicator';
      typingIndicator.innerHTML = '<div class="typing-dot"></div><div class="typing-dot"></div><div class="typing-dot"></div>';
      chatMessages.appendChild(typingIndicator);
      chatMessages.scrollTop = chatMessages.scrollHeight;

      setTimeout(() => {
        typingIndicator.remove();
        
        const response = chatbot.generateResponse(text);
        const botMessage = document.createElement('div');
        botMessage.className = 'chat-message bot';
        botMessage.textContent = response;
        chatMessages.appendChild(botMessage);
        chatMessages.scrollTop = chatMessages.scrollHeight;
      }, 1000 + Math.random() * 1000);
    });

    // Quick action buttons
    document.querySelectorAll('.quick-action-btn').forEach(btn => {
      btn.addEventListener('click', function() {
        const query = this.getAttribute('data-query');
        chatInput.value = query;
        chatForm.dispatchEvent(new Event('submit'));
      });
    });
  </script>
</body>
</html>
